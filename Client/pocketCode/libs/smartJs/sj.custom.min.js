/* ----------------------------- Smart JS --------------------------------
 * Author: Wolfgang Wintersteller
 *         wolfgang.wintersteller@gmail.com
 *
 * Licensed under Unlicense:
 *
 * This is free and unencumbered software released into the public domain.
 * For more information, please refer to <http://unlicense.org/>
 */
'use strict';Object.prototype.merge=function(o){if(typeof o!=='object')return this;for(var m in o){if(o.hasOwnProperty(m)){if(typeof this[m]==='object'&&typeof o[m]==='object'&&!(o[m]instanceof Array))this[m].merge(o[m]);else this[m]=o[m]}}return this};Object.defineProperty(Object.prototype,'merge',{enumerable:false});Function.prototype.extends=function(a,b){b=b!==false?true:false;var c=this.prototype;if(b)this.prototype=new a();else this.prototype=Object.create(a.prototype);this.prototype.constructor=c.constructor};Object.defineProperty(Function.prototype,'extends',{enumerable:false});Array.prototype.insert=function(a,o){this.splice(a,0,o)};Object.defineProperty(Array.prototype,'insert',{enumerable:false});Array.prototype.remove=function(o){var a,counter=0;while((a=this.indexOf(o))!==-1){this.splice(a,1);counter++}return counter};Object.defineProperty(Array.prototype,'remove',{enumerable:false});Array.prototype.dispose=function(){for(var i=this.length-1;i>=0;i--){if(this[i]&&typeof this[i].dispose==='function'){this[i].dispose()}}this.length=0};Object.defineProperty(Array.prototype,'dispose',{enumerable:false});var SmartJs={_version:0.1,_objectId:0,getNewId:function(){return'sj'+this._objectId++},Device:{isIOs:((typeof ((window.orientation!==undefined)?window.orientation:((window.screen!==undefined)?window.screen.orientation.angle:undefined))!=='undefined')&&navigator.userAgent.match(/iPad|iPhone|iPod/i)&&!navigator.userAgent.match(/IEMobile|Windows Phone/i)),isFirefoxOS:(!!"mozApps"in navigator&&navigator.userAgent.search("Mobile")!=-1&&avigator.userAgent.search("Android")<0),isTouch:('ontouchstart'in window)||('msMaxTouchPoints'in navigator&&navigator.msMaxTouchPoints>0)||('maxTouchPoints'in navigator&&navigator.maxTouchPoints>0),isMobile:(typeof ((window.orientation!==undefined)?window.orientation:((window.screen!==undefined)?window.screen.orientation.angle:undefined))!=='undefined')||!!navigator.userAgent.match(/iPad|iPhone|Android|BlackBerry|Phone|ZuneWP7|WPDesktop|webOS/i),},isBrowserCompatible:function(){var d=true;var f={Object_getPrototypeOf:function(){if(!Object.getPrototypeOf){d=false;return false}return true}(),Object_defineProperty:function(){if(!Object.defineProperty){d=false;return false}else{var a={};try{Object.defineProperty(a,'a',{value:'test',writable:true,enumerable:true,configurable:true})}catch(ex){d=false;return false}}return true}(),Array_indexOf:function(){if([].indexOf)return true;d=false;return false}(),document_addEventListener:function(){if(document.addEventListener)return true;d=false;return false}(),event_stopPropagation:function(){var e=document.createEvent('MouseEvents');e.initEvent('click',false,true);if(e.stopPropagation)return true;d=false;return false}(),String_trim:function(){if(''.trim)return true;d=false;return false}(),window_getComputedStyle:function(){if(!window.getComputedStyle){d=false;return false}return true}(),cssBoxSizing_borderBox:function(){var a=document.createElement('div');var b=a.style;b.position='absolute';b.top='-200px';b.left='-200px';b.boxSizing='border-box';b.border='solid 30px black';b.height='100px';b.width='100px';document.body.appendChild(a);var c=a.offsetHeight==100&&a.offsetWidth==100;document.body.removeChild(a);a=undefined;if(c)return true;d=false;return false}(),xmlHttpRequest:function(){try{var a=new XMLHttpRequest()}catch(e){d=false;return false}return true}(),};return{result:d,tests:f}},};SmartJs.Core={};SmartJs.Core={String:(function(){function Strg(a){this._string=a;this._format=arguments}Strg.prototype.merge({toString:function(){return this._string.replace(/({)(\d+)(})/gi,function(a,b,c){var d=parseInt(c)+1;return this._format[d].toString()}.bind(this))},});return Strg})(),Component:(function(){function Component(a){if(a)this._mergeProperties(a)}Object.defineProperties(Component.prototype,{objClassName:{get:function(){return this.constructor.toString().match(/function\s*(\w+)/)[1]},},});Component.prototype.merge({__dispose:function(a){if(this._disposing||this._disposed)return;this._disposing=true;for(var b in this){if(typeof this[b]==='function'||!this.hasOwnProperty(b))continue;if(this[b]&&typeof this[b].dispose==='function'&&(!this[b]._disposing||!this[b]._disposed)){this[b].dispose()}if(typeof b!=='function'&&b!=='_disposing')delete this[b]}var c=Object.getPrototypeOf(this);if(typeof c.__dispose==='function')c.__dispose(true);if(!a)this._disposed=true;delete this._disposing},dispose:function(){this.__dispose();delete this.constructor;this._disposed=true},_mergeProperties:function(a,b){if(!a)return;b=b||this;for(var p in a){if(typeof a[p]==='object'&&!(a[p]instanceof Array)){this._mergeProperties(a[p],b[p])}else{var c=b[p];try{b[p]=a[p]}catch(e){}}}},});return Component})(),};SmartJs.Core.EventTarget=(function(){EventTarget.extends(SmartJs.Core.Component,false);function EventTarget(a){SmartJs.Core.Component.call(this,a)}EventTarget.prototype.merge({_addDomListener:function(a,b,c,d){var f=function(e){e=e||{};if(d){if(d.hasOwnProperty('stopPropagation')&&d.stopPropagation!==false)e.stopPropagation();e.merge(d)}return c.call(this,e)}.bind(this);if(a.addEventListener)a.addEventListener(b,f,false);else a.attachEvent('on'+b,f);return f},_removeDomListener:function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,false);else a.detachEvent('on'+b,c)},});return EventTarget})();SmartJs.Event={Event:(function(){Event.extends(SmartJs.Core.Component);function Event(a){this.target=a;this._listeners=[]};Object.defineProperties(Event.prototype,{listenersAttached:{get:function(){return this._listeners&&this._listeners.length>0},},});Event.prototype.merge({addEventListener:function(a){var b=this.__listenerIndex(a);if(b==-1){this._listeners.push(a);return true}return false},removeEventListener:function(a){if(this._disposed)return false;var b=this.__listenerIndex(a);if(b>=0){this._listeners.splice(b,1);return true}return false},__listenerIndex:function(a){var b=this._listeners.indexOf(a);if(b>=0)return b;var c=this._listeners;var d;for(var i=0,l=c.length;i<l;i++){d=c[i];if(!d){this._listeners.splice(i,1);i--;l--;continue}if(d.handler===a.handler&&d.scope===a.scope)return i}return-1},dispatchEvent:function(b,c,d){var e=this._listeners||[];var f,dispatchedAt=Date.now();for(var i=0,l=e.length;i<l;i++){f=e[i];if(!f||!f.handler||(f.scope&&f.scope._disposed)){this._listeners.splice(i,1);l--;i--;continue}var a=b||{};a.target=c||this.target;a.bubbles=d||false;a.dispatchedAt=dispatchedAt;if(f instanceof SmartJs.Event.AsyncEventListener){if(f.scope)setTimeout(f.handler.bind(f.scope,a),0);else setTimeout(function(){f.handler(a)},0)}else{if(f.scope)f.handler.call(f.scope,a);else f.handler(a)}}},dispose:function(){this.target=undefined;this._listeners=undefined;SmartJs.Core.Component.prototype.dispose.call(this)},});return Event})(),EventListener:(function(){function EventListener(a,b){this.handler=a;this.scope=b};return EventListener})(),};SmartJs.Event.AsyncEventListener=(function(){AsyncEventListener.extends(SmartJs.Event.EventListener,false);function AsyncEventListener(a,b){SmartJs.Event.EventListener.call(this,a,b)}return AsyncEventListener})();SmartJs.Components={Application:(function(){Application.extends(SmartJs.Core.EventTarget);function Application(a){this._viewport=a;this._onConnectionStatusChange=new SmartJs.Event.Event(this);this._onError=new SmartJs.Event.Event(this);this._online=navigator.onLine;this._offlineListener=this._addDomListener(window,'offline',this._offlineHandler);this._onlineListener=this._addDomListener(window,'online',this._onlineHandler);this._errorListener=this._addDomListener(window,'error',this._errorHandler)}Application.prototype.merge({_offlineHandler:function(){if(!this._online)return;this._online=false;this._onConnectionStatusChange.dispatchEvent({online:false})},_onlineHandler:function(){if(this._online)return;this._online=true;this._onConnectionStatusChange.dispatchEvent({online:true})},_errorHandler:function(e){this._onError.dispatchEvent({error:e})},dispose:function(){this._removeDomListener(window,'offline',this._offlineListener);this._removeDomListener(window,'online',this._onlineListener);this._removeDomListener(window,'error',this._errorListener);SmartJs.Core.EventTarget.prototype.dispose.call(this)},});return Application})(),Timer:(function(){Timer.extends(SmartJs.Core.Component);function Timer(a,b,c,d){this._delay=0;this.delay=this._remainingTime=a||0;this._callBackArgs=d;this._paused=false;this._onExpire=new SmartJs.Event.Event(this);if(b)this._onExpire.addEventListener(b);if(c)this.start()}Object.defineProperties(Timer.prototype,{onExpire:{get:function(){return this._onExpire},},});Object.defineProperties(Timer.prototype,{delay:{set:function(a){if(this._remainingTime===0)this._delay=a;else{this.stop();this._delay=a;this.start()}},},remainingTime:{get:function(){if(this._paused||this._remainingTime===0)return this._remainingTime;else return this._remainingTime-(Date.now()-this._startTime)},},});Timer.prototype.merge({start:function(){this._clearTimeout();this._startTime=Date.now();this._remainingTime=this._delay;if(this._remainingTime===0){this._onExpire.dispatchEvent(this._callBackArgs);return}this._setTimeout(this._delay);this._paused=false},pause:function(){if(this._paused)return;this._clearTimeout();this._remainingTime-=(Date.now()-this._startTime);if(this._remainingTime<0)this._remainingTime=0;this._paused=true},resume:function(){if(!this._paused)return;this._startTime=Date.now();this._setTimeout(this._remainingTime);this._paused=false},stop:function(){this._clearTimeout();this._remainingTime=0;this._paused=false},_dispatchExpire:function(){this._remainingTime=0;this._onExpire.dispatchEvent(this._callBackArgs)},_setTimeout:function(a){this._clearTimeout();this._timeoutId=window.setTimeout(this._dispatchExpire.bind(this),a)},_clearTimeout:function(){if(this._timeoutId){window.clearTimeout(this._timeoutId);this._timeoutId=undefined}},dispose:function(){this.stop();SmartJs.Core.Component.prototype.dispose.call(this)},});return Timer})(),Stopwatch:(function(){Stopwatch.extends(SmartJs.Core.Component);function Stopwatch(){this._init()}Object.defineProperties(Stopwatch.prototype,{value:{get:function(){var a=0.0;if(!this._startDateTime)return a;if(this._pausedDateTime)a=(this._pausedDateTime-this._startDateTime);else a=(Date.now()-this._startDateTime);return a/1000.0},},startTimestamp:{get:function(){return this._startDateTime},},});Stopwatch.prototype.merge({_init:function(){this._startDateTime=undefined;this._pausedDateTime=undefined},start:function(a){this._init();this._startDateTime=a||Date.now()},reset:function(){var a=!!this._startDateTime,paused=!!this._pausedDateTime;this._init();if(paused)this._startDateTime=this._pausedDateTime=Date.now();else if(a)this._startDateTime=Date.now()},pause:function(){this._pausedDateTime=Date.now()},resume:function(){if(!this._pausedDateTime)return;this._startDateTime+=Date.now()-this._pausedDateTime;this._pausedDateTime=undefined},stop:function(){this._init()},dispose:function(){this.stop();SmartJs.Core.Component.prototype.dispose.call(this)}});return Stopwatch})(),InlineWorker:(function(){InlineWorker.extends(SmartJs.Core.EventTarget);function InlineWorker(a,b,c){this._scope=a;this._workerMethod=b;this._busy=false;var d=['onmessage = ',this._internalOnMessage,'; var workerMethod = ',this._workerMethod,', '];d=d.concat(this._parseLookupObject(c));d.pop();d.push(';');try{var f;try{f=new Blob(d)}catch(e){if(!window.BlobBuilder)window.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(window.BlobBuilder){var g=new BlobBuilder();g.append(d.join(''));f=g.getBlob()}}this._blobURL=URL.createObjectURL(f,{type:"text/javascript"});this._worker=new Worker(this._blobURL);this._onMessageListener=this._addDomListener(this._worker,'message',this._onMessageHandler);this._onErrorListener=this._addDomListener(this._worker,'error',this._onErrorHandler);this._onMessageErrorListener=this._addDomListener(this._worker,'messageerror',this._onMessageErrorHandler)}catch(e){URL.revokeObjectURL(this._blobURL);this._worker=undefined}this._onExecuted=new SmartJs.Event.Event(this);this._onError=new SmartJs.Event.Event(this)}Object.defineProperties(InlineWorker.prototype,{onExecuted:{get:function(){return this._onExecuted},},onError:{get:function(){return this._onError},},});Object.defineProperties(InlineWorker.prototype,{isBusy:{get:function(){return this._busy},},});InlineWorker.prototype.merge({_internalOnMessage:function(e){var a=e.data,returnValue=this.workerMethod.apply(this,a.arguments);if(a.buffer)this.postMessage(returnValue,[returnValue.data.buffer]);else this.postMessage(returnValue)},_parseLookupObject:function(a,b){var c=[];if(a){for(var d in a){c.push(d);c.push(b?': ':' = ');if(typeof a[d]!='object')c.push(a[d]);else{c.push('{ ');c=c.concat(this._parseLookupObject(a[d],true));c.push(' }')}c.push(', ')}}return c},_checkFallback:function(a){if(!this._worker){this._onExecuted.dispatchEvent({result:this._workerMethod.apply(this._scope,a),async:false});return true}this._busy=true;return false},execute:function(){var a=[].slice.call(arguments);if(!this._checkFallback(a))this._worker.postMessage({arguments:a,buffer:false})},executeOnImageData:function(){var a=[].slice.call(arguments);if(!this._checkFallback(a))this._worker.postMessage({arguments:a,buffer:true},[a[0].data.buffer])},_onMessageHandler:function(e){this._busy=false;this._onExecuted.dispatchEvent({result:e.data,async:true})},_onErrorHandler:function(e){this._busy=false;this._onError.dispatchEvent({message:e.message})},_onMessageErrorHandler:function(e){this._busy=false;this._onError.dispatchEvent({message:e.message})},dispose:function(){if(this._worker){if(this._blobURL)URL.revokeObjectURL(this._blobURL);this._worker.terminate();this._removeDomListener(this._worker,'message',this._onMessageListener);this._removeDomListener(this._worker,'error',this._onErrorListener);this._removeDomListener(this._worker,'messageerror',this._onMessageErrorListener)}SmartJs.Core.EventTarget.prototype.dispose.call(this)},});return InlineWorker})(),StorageAdapter:(function(){StorageAdapter.extends(SmartJs.Core.Component);function StorageAdapter(){this._onChange=new SmartJs.Event.Event(this);this._supported=false}Object.defineProperties(StorageAdapter.prototype,{onChange:{get:function(){return this._onChange},},});Object.defineProperties(StorageAdapter.prototype,{supported:{get:function(){return this._supported},},});StorageAdapter.prototype.merge({_validate:function(a){if(!a||typeof a!='string')throw new Error('invalid argument: key, expected type = string');if(!this._supported)throw new Error('Adapter not supported');return true},getValue:function(a){this._validate(a);var b=this._getValue(a);if(b){b=JSON.parse(b);if(b.type=='object')return JSON.parse(b.value);else if(b.type=='number')return parseFloat(b.value);else if(b.type=='boolean')return b.value=='true'?true:false;return b.value}return undefined},_getValue:function(a){},setValue:function(a,b){this._validate(a);var c=this.getValue(a),isObject=typeof b=='object',item={type:typeof b,value:isObject?JSON.stringify(b):b.toString(),};this._setValue(a,JSON.stringify(item));if((isObject&&JSON.stringify(this.getValue(a))!=item.value)||(!isObject&&this.getValue(a)!==b))throw new Error('Adapter: value not set correctly');this._onChange.dispatchEvent({key:a,oldValue:c,newValue:b,})},_setValue:function(a,b){},deleteKey:function(a){this._validate(a);try{var b=this.getValue(a)}catch(e){return false}this._deleteKey(a);this._onChange.dispatchEvent({key:a,oldValue:b,newValue:undefined,});return true},_deleteKey:function(a){},clear:function(){if(!this._supported)throw new Error('Adapter not supported');this._clear()},_clear:function(){},});return StorageAdapter})(),};SmartJs.Components.merge({CookieAdapter:(function(){CookieAdapter.extends(SmartJs.Components.StorageAdapter,false);function CookieAdapter(a){SmartJs.Components.StorageAdapter.call(this);a||(a=365);var b=new Date();b.setTime(b.getTime()+(a*24*60*60*1000));this._expires=b.toUTCString();this._supported=('cookie'in document&&(document.cookie.length>0||(document.cookie='test').indexOf.call(document.cookie,'test')>-1))&&!!JSON;if(this._supported)this._deleteKey('test')}CookieAdapter.prototype.merge({_setValue:function(a,b){document.cookie=a+'='+b+'; path=/; expires='+this._expires},_getValue:function(a){var b=(document.cookie.match('(^|; )'+a+'=([^;]*)')||0)[2];if(b)return b;return undefined},_deleteKey:function(a){document.cookie=a+'=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;'},_clear:function(){var a=document.cookie.split(';'),cookie;for(var i=0;i<a.length;i++){cookie=a[i].trim();var b=cookie.indexOf('=');if(b>-1)this.deleteKey(cookie.substr(0,b))}},});return CookieAdapter})(),LocalStorageAdapter:(function(){LocalStorageAdapter.extends(SmartJs.Components.StorageAdapter,false);function LocalStorageAdapter(){SmartJs.Components.StorageAdapter.call(this);try{localStorage.setItem('test','test');localStorage.removeItem('test');this._supported=true}catch(e){this._supported=false}}LocalStorageAdapter.prototype.merge({_setValue:function(a,b){localStorage.setItem(a,b)},_getValue:function(a){return localStorage.getItem(a)},_deleteKey:function(a){localStorage.removeItem(a)},_clear:function(){var a=[];for(var i=0,l=localStorage.length;i<l;i++)a.push(localStorage.key(i));for(var i=0,l=a.length;i<l;i++)this.deleteKey(a[i])},});return LocalStorageAdapter})(),});SmartJs._AnimationFrame=(function(){function AnimationFrame(){this._frameId=undefined;this._onUpdate=new SmartJs.Event.Event(this)}AnimationFrame.prototype.merge({_request:function(){var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame;if(b)return b.bind(window);return function(a){return window.setTimeout(a,17)}}(),_cancel:function(){var b=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelAnimationFrame;if(b)return b.bind(window);return function(a){window.clearTimeout(a)}}(),_run:function(){this._onUpdate.dispatchEvent();this._frameId=this._request(this._run.bind(this))},addEventListener:function(a){var e=this._onUpdate,start=!e.listenersAttached;e.addEventListener(a);if(start)this._frameId=this._request(this._run.bind(this))},removeEventListener:function(a){var e=this._onUpdate;e.removeEventListener(a);if(!e.listenersAttached){this._cancel(this._frameId);this._frameId=undefined}},dispose:function(){},});return AnimationFrame})();SmartJs.AnimationFrame=new SmartJs._AnimationFrame();SmartJs.Animation={Type:{LINEAR:function(a){return a},LINEAR2D:function(a){return{x:a,y:a}},},Animation:(function(){Animation.extends(SmartJs.Core.Component);function Animation(a,b,c,d){this._callbackArgs={};this._paused=false;this._start=a;this._end=b;this._diff=b-a;this._current=a;this._animationTime=c;this._render=d;this._timer=new SmartJs.Components.Timer(this._animationTime);this._afl=new SmartJs.Event.EventListener(this._executeAnimation,this);this._onUpdate=new SmartJs.Event.Event(this);this._onExecuted=new SmartJs.Event.Event(this)}Object.defineProperties(Animation.prototype,{onUpdate:{get:function(){return this._onUpdate},},onExecuted:{get:function(){return this._onExecuted},},});Animation.prototype.merge({_updateValue:function(a){var b=this._start+a*this._diff;if(a==1.0){this._current=this._end;this._onUpdate.dispatchEvent({value:this._end});return}if(Math.abs(this._current-b)<1)return;this._current=b;this._onUpdate.dispatchEvent({value:b})},_executeAnimation:function(){if(this._paused)return;var a=this._timer.remainingTime;var b=Math.min(1.0,(this._animationTime-a)/this._animationTime);this._updateValue(this._render(b));if(b==1.0){this.stop();this._onExecuted.dispatchEvent(this._callbackArgs)}},start:function(a){if(a){this._callbackArgs=a}this._timer.start();SmartJs.AnimationFrame.addEventListener(this._afl)},pause:function(){this._timer.pause();this._paused=true},resume:function(){this._timer.resume();this._paused=false},stop:function(){this._timer.stop();SmartJs.AnimationFrame.removeEventListener(this._afl);this._paused=false},dispose:function(){this.stop();this._timer.dispose();SmartJs.Core.Component.prototype.dispose.call(this)},});return Animation})(),};SmartJs.Animation.Animation2D=(function(){Animation2D.extends(SmartJs.Animation.Animation,false);function Animation2D(a,b,c,d){SmartJs.Animation.Animation.call(this,0,0,c);this._render=d;this._start=a;this._end=b;this._diff={x:b.x-a.x,y:b.y-a.y,};this._current=a}Animation2D.prototype.merge({_updateValue:function(a){var b={x:this._start.x+a.x*this._diff.x,y:this._start.y+a.y*this._diff.y,};if(a.x==1.0&&a.y==1.0){this._current=this._end;this._onUpdate.dispatchEvent({value:this._end});return}if((Math.abs(this._current.x-b.x)<1&&Math.abs(this._current.y-b.y)<1))return;this._current=b;this._onUpdate.dispatchEvent({value:b})},});return Animation2D}());SmartJs.Animation.Rotation=(function(){Rotation.extends(SmartJs.Core.Component);function Rotation(a){this._startAngle=a;this._rotationSpeed=0.0;this._timer=new SmartJs.Components.Stopwatch();this._afl=new SmartJs.Event.EventListener(this._executeAnimation,this);this._paused=false;this._onUpdate=new SmartJs.Event.Event(this)}Object.defineProperties(Rotation.prototype,{onUpdate:{get:function(){return this._onUpdate},},});Object.defineProperties(Rotation.prototype,{angle:{get:function(){var a=(this._startAngle+this._timer.value*this._rotationSpeed)%360.0;if(a<0)a+=360.0;return a},set:function(a){this._startAngle=a;this._timer.reset();if(!this._timer.startTimestamp||this._paused)this._onUpdate.dispatchEvent({value:this.angle})},},rotationSpeed:{get:function(){return this._rotationSpeed},set:function(a){if(a==this._rotationSpeed)return;this._startAngle=this.angle;this._rotationSpeed=a;if(a==0.0){this.stop();this._onUpdate.dispatchEvent({value:this.angle})}else if(this._paused)this._timer.reset();else this._start()},},});Rotation.prototype.merge({_executeAnimation:function(){if(this._paused)return;this._onUpdate.dispatchEvent({value:this.angle})},toObject:function(){return{startAngle:this._startAngle,startTimestamp:this._timer.startTimestamp,rotationSpeed:this._rotationSpeed,}},setObject:function(a){this._startAngle=a.startAngle||0.0;this._rotationSpeed=a.rotationSpeed||0.0;if(a.startTimestamp&&!!a.rotationSpeed)this._start(a.startTimestamp);this._onUpdate.dispatchEvent({value:this.angle})},_start:function(a){this._timer.start(a);SmartJs.AnimationFrame.addEventListener(this._afl);this._paused=false},pause:function(){this._timer.pause();window.cancelAnimationFrame(this._frameId);this._paused=true},resume:function(){this._timer.resume();this._paused=false},stop:function(){SmartJs.AnimationFrame.removeEventListener(this._afl);this._rotationSpeed=0;this._timer.stop();this._paused=false},dispose:function(){this.stop();this._timer.dispose();SmartJs.Core.Component.prototype.dispose.call(this)},});return Rotation}());SmartJs.RequestMethod={GET:'GET',PUT:'PUT',POST:'POST',DELETE:'DELETE',};SmartJs.Communication={ServiceRequest:(function(){ServiceRequest.extends(SmartJs.Core.EventTarget);function ServiceRequest(a){this._url=a||'';this._onLoadStart=new SmartJs.Event.Event(this);this._onLoad=new SmartJs.Event.Event(this);this._onError=new SmartJs.Event.Event(this);this._onProgressChange=new SmartJs.Event.Event(this);this._onProgressSupportedChange=new SmartJs.Event.Event(this)}Object.defineProperties(ServiceRequest.prototype,{onLoadStart:{get:function(){return this._onLoadStart},},onLoad:{get:function(){return this._onLoad},},onError:{get:function(){return this._onError},},onProgressChange:{get:function(){return this._onProgressChange},},onProgressSupportedChange:{get:function(){return this._onProgressSupportedChange},},});Object.defineProperties(ServiceRequest.prototype,{url:{get:function(){return this._url},set:function(a){this._url=a},},method:{value:SmartJs.RequestMethod.GET,writable:true,},progressSupported:{value:false,writable:true,},});ServiceRequest.prototype.merge({_onProgressHandler:function(e){if(e.lengthComputable){if(this._onProgressChange)this._onProgressChange.dispatchEvent({progress:Math.round(e.loaded/e.total*100)})}else{if(this.progressSupported){this.progressSupported=false;if(this._onProgressSupportedChange)this._onProgressSupportedChange.dispatchEvent({progressSupport:false})}}},_onReadyStateChangeHandler:function(e){if(!this._started&&this._xhr.readyState===1){this._started=true;this._onLoadStart.dispatchEvent()}if(this._xhr.readyState!==4)return;if(this._xhr.status!==200){var a=new Error();a.responseText=this._xhr.responseText;try{a.responseJson=JSON.parse(this._xhr.responseText)}catch(e){}a.statusCode=this._xhr.status;this._onError.dispatchEvent(a)}else this._onLoad.dispatchEvent({}.merge(e.target))},dispose:function(){if(this._xhr)this._xhr.abort();SmartJs.Core.EventTarget.prototype.dispose.call(this)},});return ServiceRequest})(),};SmartJs.Communication.merge({XmlHttpRequest:(function(){XmlHttpRequest.extends(SmartJs.Communication.ServiceRequest,false);function XmlHttpRequest(a){SmartJs.Communication.ServiceRequest.call(this,a);this._xhr=new XMLHttpRequest();var b=this._xhr,xhru=b.upload;try{this.progressSupported=('onprogress'in b);this._addDomListener(b,'progress',this._onProgressHandler);if(xhru)this._addDomListener(xhru,'progress',this._onProgressHandler)}catch(e){this.progressSupported=false}this._addDomListener(b,'readystatechange',this._onReadyStateChangeHandler);if(xhru)this._addDomListener(xhru,'readystatechange',this._onReadyStateChangeHandler)}Object.defineProperties(XmlHttpRequest.prototype,{supported:{get:function(){if(!window.XMLHttpRequest)return false;var b=window.location,a=document.createElement('a');a.href=this._url;var c=b.protocol=='https:'?'443':b.port;var d=a.port;if(d=='0')d='';if(a.hostname!=b.hostname||(d!=b.port&&d!=c)||a.protocol!=b.protocol)return false;return true},},responseText:{get:function(){return this._xhr.responseText},},});XmlHttpRequest.prototype.merge({send:function(a,b){this.sendData(undefined,a,b)},sendData:function(a,b,c){if(b)this.method=b;if(c)this._url=c;try{if(a){if(this.method===SmartJs.RequestMethod.POST){if(a instanceof File&&xhr.setRequestHeader){this._xhr.open(this.method,this._url);this._xhr.send(a)}else{this._xhr.open(this.method,this._url);var d='';for(var f in a)d+=f+'='+a[f]+'&';this._xhr.send(d)}}else{var g=(this._url.indexOf('?')===-1);for(var f in a){this._url+=(g?'?':'&')+f+'='+a[f];g=false}this._xhr.open(this.method,this._url);this._xhr.send()}}else{this._xhr.open(this.method,this._url);this._xhr.send()}}catch(e){this._onLoadStart.dispatchEvent();e.statusCode=0;this._onError.dispatchEvent(e)}},});return XmlHttpRequest})(),CorsRequest:(function(){CorsRequest.extends(SmartJs.Communication.ServiceRequest,false);function CorsRequest(a){SmartJs.Communication.ServiceRequest.call(this,a);if(!this.supported)return;if(!this._xhr){this._xhr=new XMLHttpRequest()}var b=this._xhr;try{this.progressSupported=('onprogress'in b);this._addDomListener(b,'progress',this._onProgressHandler)}catch(e){this.progressSupported=false}this._addDomListener(b,'readystatechange',this._onReadyStateChangeHandler)}Object.defineProperties(CorsRequest.prototype,{supported:{get:function(){if(!this._xhr)this._xhr=new XMLHttpRequest();if('withCredentials'in this._xhr)return true;return false},},responseText:{get:function(){return this._xhr.responseText},},});CorsRequest.prototype.merge({send:function(a,b){this.sendData(undefined,a,b)},sendData:function(a,b,c){if(b)this.method=b;if(c)this._url=c;try{if(a){if(this.method===SmartJs.RequestMethod.POST){if(a instanceof File&&xhr.setRequestHeader){this._xhr.open(this.method,this._url);this._xhr.send(a)}else{this._xhr.open(this.method,this._url);var d='';for(var f in a)d+=f+'='+a[f]+'&';this._xhr.send(d)}}else{var g=(this._url.indexOf('?')===-1);for(var f in a){this._url+=(g?'?':'&')+f+'='+a[f];g=false}this._xhr.open(this.method,this._url);this._xhr.send()}}else{this._xhr.open(this.method,this._url);this._xhr.send()}}catch(e){e.statusCode=0;this._onError.dispatchEvent(e)}},});return CorsRequest})(),ResourceLoader:(function(){ResourceLoader.extends(SmartJs.Core.EventTarget);function ResourceLoader(){this._loading=false;this._useSizeForProgressCalculation=false;this._totalSize=0;this._loadedSize=0;this._registeredFiles=[];this._onProgressChange=new SmartJs.Event.Event(this);this._onLoad=new SmartJs.Event.Event(this);this._onError=new SmartJs.Event.Event(this)}Object.defineProperties(ResourceLoader.prototype,{useSizeForProgressCalculation:{get:function(){return this._useSizeForProgressCalculation},set:function(a){if(a==this._useSizeForProgressCalculation)return;this._useSizeForProgressCalculation=a},},crossOriginProperty:{set:function(a){this._crossOriginProperty=a}}});Object.defineProperties(ResourceLoader.prototype,{onProgressChange:{get:function(){return this._onProgressChange},},onLoad:{get:function(){return this._onLoad},},onError:{get:function(){return this._onError},},});ResourceLoader.prototype.merge({registerFiles:function(a){var b;this._registeredFiles=[];this._totalSize=0;for(var i=0,l=a.length;i<l;i++){b=a[i];this._registeredFiles.push(b);if(this.useSizeForProgressCalculation){this._totalSize+=b.size}}},load:function(a){if(a)this.registerFiles(a);this._loadedSize=0;if(this._registeredFiles.length>0){this._loading=true;this._requestFile(0)}else this._onLoad.dispatchEvent()},abortLoading:function(){this._loading=false},_fileErrorHandler:function(e){if(!this._loading)return;this._loading=false;var a=e.fileIndex;this._onError.dispatchEvent({file:this._registeredFiles[e.fileIndex],element:e.element})},_fileSuccessHandler:function(e){if(!this._loading)return;var a=e.fileIndex;if(this.useSizeForProgressCalculation){var b=this._registeredFiles[a];this._loadedSize+=b.size;this._onProgressChange.dispatchEvent({progress:Math.round(this._loadedSize/this._totalSize*100),file:this._registeredFiles[a],element:e.element})}else this._onProgressChange.dispatchEvent({progress:Math.round((a+1)/this._registeredFiles.length*100),file:this._registeredFiles[a],element:e.element});if(a+1==this._registeredFiles.length){this._loading=false;this._onLoad.dispatchEvent()}else{var c=this._requestFile.bind(this,a+1);window.setTimeout(c,20)}},_requestFile:function(a){if(this._disposed)return;var b=document.head||document.getElementsByTagName('head')[0];var c=this._registeredFiles[a];var d=document.getElementById(c.url);if(d){this._fileSuccessHandler({fileIndex:a,element:d});return}switch(c.type){case'js':var f=document.createElement('script');f.async=false;this._addDomListener(f,'error',this._fileErrorHandler,{fileIndex:a,element:f});var g=false;f.onload=f.onreadystatechange=function(e){if(!g&&(!f.readyState||f.readyState==='loaded'||f.readyState==='complete')){g=true;f.onload=f.onreadystatechange=null;e=e||{};e.merge({fileIndex:a,element:f});this._fileSuccessHandler(e)}}.bind(this);b.appendChild(f);f.id=f.src=c.url;break;case'css':var h=document.createElement('link');h.type='text/css';h.rel='stylesheet';h.id=c.url;b.appendChild(h);var i=new Image();this._addDomListener(i,'error',this._fileSuccessHandler,{fileIndex:a,element:h});i.src=c.url;break;case'img':var j=new Image();if('crossOrigin'in j&&this._crossOriginProperty)j.crossOrigin=this._crossOriginProperty;this._addDomListener(j,'error',this._fileErrorHandler,{fileIndex:a,element:j});this._addDomListener(j,'load',this._fileSuccessHandler,{fileIndex:a,element:j});j.src=c.url;break;default:this._loading=false;throw new Error('invalid fileType: '+c.type);}},dispose:function(){SmartJs.Core.EventTarget.prototype.dispose.call(this)},});return ResourceLoader})(),});SmartJs.Ui={};SmartJs.Ui._Window=(function(){Window.extends(SmartJs.Core.EventTarget);function Window(){this._hiddenProperty='hidden';this._visible=true;this._onResize=new SmartJs.Event.Event(window);this._onVisibilityChange=new SmartJs.Event.Event(window);var a='resize';if(((window.orientation!==undefined)?window.orientation:((window.screen!==undefined)?window.screen.orientation.angle:undefined))change)a='orientationchange';this._addDomListener(window,a,function(e){this._onResize.dispatchEvent({height:this.height,width:this.width})});var b='';if(typeof document.hidden!==undefined){this._hiddenProperty='hidden';b='visibilitychange'}else if(typeof document.mozHidden!==undefined){this._hiddenProperty='mozHidden';b='mozvisibilitychange'}else if(typeof document.msHidden!==undefined){this._hiddenProperty='msHidden';b='msvisibilitychange'}else if(typeof document.webkitHidden!==undefined){this._hiddenProperty='webkitHidden';b='webkitvisibilitychange'}if(b!=='')this._addDomListener(document,b,this._visibilityChangeHandler);if(b==''||SmartJs.Device.isIOs){if('onfocusin'in document){this._addDomListener(document,'focusin',this._visibilityChangeHandler);this._addDomListener(document,'focusout',this._visibilityChangeHandler)}else{this._addDomListener(window,'pageshow',this._visibilityChangeHandler);this._addDomListener(window,'pagehide',this._visibilityChangeHandler);this._addDomListener(window,'focus',this._visibilityChangeHandler);this._addDomListener(window,'blur',this._visibilityChangeHandler)}}}Object.defineProperties(Window.prototype,{onResize:{get:function(){return this._onResize},},onVisibilityChange:{get:function(){return this._onVisibilityChange},},});Object.defineProperties(Window.prototype,{title:{get:function(){return document.title},set:function(a){document.title=a},},visible:{get:function(){return this._visible},},height:{get:function(){if(window.innerHeight){return window.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){return document.documentElement.clientHeight}else if(document.body.clientHeight){return document.body.clientHeight}return 0},},width:{get:function(){if(window.innerWidth){return window.innerWidth}else if(document.documentElement&&document.documentElement.clientWidth){return document.documentElement.clientWidth}else if(document.body.clientWidth){return document.body.clientWidth}return 0},},});Window.prototype.merge({_visibilityChangeHandler:function(e){e=e||window.event;var a={blur:false,focusout:false,pagehide:false};if(e.type in a)this._visible=false;else this._visible=document[this._hiddenProperty]===true?false:true;this._onVisibilityChange.dispatchEvent({visible:this._visible}.merge(e))},dispose:function(){},});return Window})();SmartJs.Ui.Window=new SmartJs.Ui._Window();SmartJs.Ui.merge({TextNode:(function(){TextNode.extends(SmartJs.Core.Component);function TextNode(b){this._text=b||'';this._dom=document.createTextNode(this._text);this._onResize=new SmartJs.Event.Event(this);this._onResize.addEventListener(new SmartJs.Event.EventListener(function(e){var a=this._parent;if(a&&a!==e.caller)this._parent.onLayoutChange.dispatchEvent({caller:this})},this))}Object.defineProperties(TextNode.prototype,{text:{get:function(){return this._text},set:function(a){this._text=a;this._dom.textContent=a;this._onResize.dispatchEvent()},},});TextNode.prototype.merge({hide:function(){this._dom.textContent='';this._onResize.dispatchEvent()},show:function(){this._dom.textContent=this._text;this._onResize.dispatchEvent()},verifyResize:function(){},dispose:function(){if(this._parent)this._parent._removeChild(this);else if(document.body.contains(this._dom))this._dom.parentNode.removeChild(this._dom);SmartJs.Core.Component.prototype.dispose.call(this)},});return TextNode})(),Control:(function(){Control.extends(SmartJs.Core.EventTarget,false);function Control(d,f){this._id=SmartJs.getNewId();if(d instanceof HTMLElement)this._dom=d;else if(typeof d==='string')this._dom=document.createElement(d);this._dom.id=this._id;this._parent=undefined;this._childs=[];this._cachedSize={height:0,width:0,innerHeight:0,innerWidth:0};this._onResize=new SmartJs.Event.Event(this);this._onResize.addEventListener(new SmartJs.Event.EventListener(function(e){var a=this._cachedSize;a.height=this.height;a.width=this.width;if(a.innerHeight!==this._innerHeight||a.innerWidth!==this._innerWidth){a.innerHeight=this._innerHeight;a.innerWidth=this._innerWidth;var b=this._childs;for(var i=0,l=b.length;i<l;i++)b[i].verifyResize(this)}var c=this._parent;if(c&&c!==e.caller)c.onLayoutChange.dispatchEvent({caller:this})},this));this._onLayoutChange=new SmartJs.Event.Event(this);this._onLayoutChange.addEventListener(new SmartJs.Event.EventListener(function(e){var a=this._cachedSize;if(this.height!=a.height||this.width!=a.width){a.height=this.height;a.width=this.width;if(this._parent)this._parent.onLayoutChange.dispatchEvent({caller:this})}var b=this._childs;for(var i=0,l=b.length;i<l;i++){var c=b[i];if(c!==e.caller)c.verifyResize(this)}},this));SmartJs.Core.EventTarget.call(this,f)}Object.defineProperties(Control.prototype,{id:{get:function(){return this._id},},rendered:{get:function(){if(!document.body)return false;return document.body.contains(this._dom)},},style:{get:function(){return this._dom.style},set:function(a){var s=this._dom.style;s.cssText='';for(var p in a){s[p]=a[p]}this.verifyResize()},},className:{get:function(){return this._dom.className},set:function(a){this._dom.className=a;this.verifyResize()},},height:{get:function(){if(!this.rendered)return 0;var a=window.getComputedStyle(this._dom);var b=this._dom.offsetHeight;b+=parseInt(a.marginTop)||0;b+=parseInt(a.marginBottom)||0;return b},set:function(a){var b=window.getComputedStyle(this._dom);if(b.boxSizing!=='border-box'){a-=parseInt(b.paddingTop)||0;a-=parseInt(b.paddingBottom)||0;a-=parseInt(b.borderTopWidth)||0;a-=parseInt(b.borderBottomWidth)||0}a-=parseInt(b.marginTop)||0;a-=parseInt(b.marginBottom)||0;a+='px';if(this.style.height!==a){this.style.height=a;this.verifyResize()}},},_innerHeight:{get:function(){if(!this.rendered)return 0;var a=window.getComputedStyle(this._dom);var b=this._dom.clientHeight;b-=parseInt(a.paddingTop)||0;b-=parseInt(a.paddingBottom)||0;return b},},width:{get:function(){if(!this.rendered)return 0;var a=window.getComputedStyle(this._dom);var b=this._dom.offsetWidth;b+=parseInt(a.marginLeft)||0;b+=parseInt(a.marginRight)||0;return b},set:function(a){var b=window.getComputedStyle(this._dom);if(b.boxSizing!=='border-box'){a-=parseInt(b.paddingLeft)||0;a-=parseInt(b.paddingRight)||0;a-=parseInt(b.borderLeftWidth)||0;a-=parseInt(b.borderRightWidth)||0}a-=parseInt(b.marginLeft)||0;a-=parseInt(b.marginRight)||0;a+='px';if(this.style.width!==a){this.style.width=a;this.verifyResize()}},},_innerWidth:{get:function(){if(!this.rendered)return 0;var a=window.getComputedStyle(this._dom);var b=this._dom.clientWidth;b-=parseInt(a.paddingLeft)||0;b-=parseInt(a.paddingRight)||0;return b},},hidden:{get:function(){var a=this._dom.style.display;if(a===''||a==='block')return false;return true},},clientRect:{get:function(){return this._dom.getBoundingClientRect()},},});Object.defineProperties(Control.prototype,{onResize:{get:function(){return this._onResize},},onLayoutChange:{get:function(){return this._onLayoutChange},},});Control.prototype.merge({verifyResize:function(a){if(this.hidden||!this.rendered)return;var b=this._cachedSize;if(b.height!==this.height||b.width!==this.width)this.onResize.dispatchEvent({caller:a})},addClassName:function(a){if(typeof a===undefined)return;this.__addClassName(this._dom.className,a);this.verifyResize(this)},__addClassName:function(a,b){var c=b.trim();if(c==='')return;c=c.split(/\s+/);var d=a.trim();if(d==='')d=[];else d=d.split(/\s+/);var e;for(var i=0,l=c.length;i<l;i++){e=c[i];d.remove(e);d.push(e)}this._dom.className=d.join(' ')},removeClassName:function(a){if(typeof a===undefined)return;this._dom.className=this.__removeClassName(a,true);this.verifyResize(this)},__removeClassName:function(a){var b=a.trim();if(b==='')return;b=b.split(/\s+/);var c=this._dom.className.trim();if(c==='')return c;else c=c.split(/\s+/);for(var i=0,l=b.length;i<l;i++)c.remove(b[i]);return c.join(' ')},replaceClassName:function(a,b){if(typeof a===undefined)return;b=b||'';if(typeof b===undefined||b.trim()==='')return this.removeClassName(a);var c=this._dom.className.split(/\s+/);var d=a.trim().split(/\s+/);var e=false;for(var i=0,l=d.length;i<l;i++)if(c.remove(d[i])>0){e=true;break}if(!e)return;var f=this.__removeClassName(a);this.__addClassName(f,b);this.verifyResize(this)},_appendChild:function(a){this._insertAt(this._childs.length,a)},_insertAt:function(a,b){var c=this._childs.indexOf(b);var d=b._parent;c=-1;if(d){c=d._childs.indexOf(b);d._removeChild(b);if(d===this&&c<=a)a--}else if(b.rendered)b._dom.parentNode.removeChild(b._dom);try{if(a===this._childs.length)this._dom.appendChild(b._dom);else this._dom.insertBefore(b._dom,this._childs[a]._dom)}catch(e){if(d)d._insertBefore(b,d._childs[c]);throw new Error(e.message+', possibly caused by appending a control to one of its own child controls (recursion loop)');}b._parent=this;this._childs.insert(a,b);b.verifyResize(this);this.onLayoutChange.dispatchEvent({},b)},_insertBefore:function(a,b){var c=this._childs.indexOf(b);this._insertAt(c,a)},_insertAfter:function(a,b){var c=this._childs.indexOf(b);this._insertAt(c+1,a)},_replaceChild:function(a,b){var c=this._childs.indexOf(b);this._removeChild(b,true);this._insertAt(c,a)},_removeChild:function(a,b){if(a._parent!==this)return;a._parent=undefined;if(a._disposed)return;if(this._childs.remove(a)>0){if(a._dom.parentNode==this._dom)this._dom.removeChild(a._dom);if(!b)this.onLayoutChange.dispatchEvent()}},hide:function(){var a=this._dom.style;if(a.display==='none')return;this._styleBeforeHide=a.display;a.display='none';if(this._parent)this._parent.onLayoutChange.dispatchEvent({},this)},show:function(){var a=this._dom.style;if(a.display!=='none')return;a.display=this._styleBeforeHide||'';if(this._parent)this._parent.onLayoutChange.dispatchEvent({},this);this.verifyResize(this)},dispose:function(){if(this._parent)this._parent._removeChild(this);else if(this.rendered)this._dom.parentNode.removeChild(this._dom);if(this._childs)this._childs.dispose();this._disposed=true},});return Control})(),});SmartJs.Ui.merge({HtmlTag:(function(){HtmlTag.extends(SmartJs.Ui.Control,false);function HtmlTag(a,b){SmartJs.Ui.Control.call(this,a,b)}Object.defineProperties(HtmlTag.prototype,{dom:{get:function(){return this._dom},},});HtmlTag.prototype.merge({setDomAttribute:function(a,b){this._dom.setAttribute(a,b)},getDomAttribute:function(a){return this._dom.getAttribute(a)},addDomListener:function(a,b,c){return this._addDomListener(this._dom,a,b,c)},removeDomListener:function(a,b){return this._removeDomListener(this._dom,a,b)},appendChild:function(a){return this._appendChild(a)},insertAt:function(a,b){return this._insertAt(a,b)},insertBefore:function(a,b){return this._insertBefore(a,b)},insertAfter:function(a,b){return this._insertAfter(a,b)},replaceChild:function(a,b){return this._replaceChild(a,b)},removeChild:function(a){return this._removeChild(a)},});return HtmlTag})(),Image:(function(){Image.extends(SmartJs.Ui.Control,false);function Image(a){var b={style:{width:'auto',height:'auto'}};if(a)b.merge(a);SmartJs.Ui.Control.call(this,'img',b);this._addDomListener(this._dom,'load',function(e){this._onLoad.dispatchEvent()});this._onLoad=new SmartJs.Event.Event(this)}Object.defineProperties(Image.prototype,{onLoad:{get:function(){return this._onLoad},},});Object.defineProperties(Image.prototype,{src:{get:function(){return this._dom.src},set:function(a){this._dom.src=a},},naturalWidth:{get:function(){return this._dom.naturalWidth},},naturalHeight:{get:function(){return this._dom.naturalHeight},},crossOrigin:{set:function(a){if('crossOrigin'in this._dom)this._dom.crossOrigin=a},},});return Image})(),ContainerControl:(function(){ContainerControl.extends(SmartJs.Ui.Control,false);function ContainerControl(a){SmartJs.Ui.Control.call(this,'div',a);this.__container=this}Object.defineProperties(ContainerControl.prototype,{_container:{set:function(a){this.__container=a},get:function(){return this.__container},},_innerHeight:{get:function(){if(this.__container!==this)return this.__container._innerHeight;if(!this.rendered)return 0;var a=window.getComputedStyle(this._dom);var b=this._dom.clientHeight;b-=parseInt(a.paddingTop)||0;b-=parseInt(a.paddingBottom)||0;return b},},_innerWidth:{get:function(){if(this.__container!==this)return this.__container._innerWidth;if(!this.rendered)return 0;var a=window.getComputedStyle(this._dom);var b=this._dom.clientWidth;b-=parseInt(a.paddingLeft)||0;b-=parseInt(a.paddingRight)||0;return b},},});ContainerControl.prototype.merge({appendChild:function(a){var b=this.__container;if(b!==this)return b.appendChild(a);return this._appendChild(a)},insertAt:function(a,b){var c=this.__container;if(c!==this)return c.insertAt(a,b);return this._insertAt(a,b)},insertBefore:function(a,b){var c=this.__container;if(c!==this)return c.insertBefore(a,b);return this._insertBefore(a,b)},insertAfter:function(a,b){var c=this.__container;if(c!==this)return c.insertAfter(a,b);return this._insertAfter(a,b)},replaceChild:function(a,b){var c=this.__container;if(c!==this)return c.replaceChild(a,b);return this._replaceChild(a,b)},removeChild:function(a){var b=this.__container;if(b!==this)return b.removeChild(a);return this._removeChild(a)},});return ContainerControl})(),Viewport:(function(){Viewport.extends(SmartJs.Ui.Control,false);function Viewport(a){SmartJs.Ui.Control.call(this,'div',a||{style:{height:'100%',width:'100%'}});this._parentHtmlElement=undefined;this._window=SmartJs.Ui.Window;this._resizeListener=new SmartJs.Event.EventListener(this.verifyResize,this);this._window.onResize.addEventListener(this._resizeListener)}Viewport.prototype.merge({addToDom:function(a){a=a||document.body;if(this._parentHtmlElement===a)return;if(this._parentHtmlElement)this._parentHtmlElement.removeChild(this._dom);a.appendChild(this._dom);this._parentHtmlElement=a;this.onResize.dispatchEvent()},dispose:function(){this._window.onResize.removeEventListener(this._resizeListener);SmartJs.Ui.Control.prototype.dispose.call(this)},});return Viewport})(),});
